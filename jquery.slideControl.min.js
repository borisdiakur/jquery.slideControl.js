/*!
 * jquery.slideControl.js ~ v0.1.0 ~ Copyright (c) 2013 Boris Diakur, https://github.com/borisdiakur/jquery.slideControl.js
 * Released under WTFPL license, http://wtfpl.org/
 */
(function(e,p,h){function l(){return p.navigator.msMaxTouchPoints||"ontouchstart"in h.documentElement}function m(a){a.preventDefault()}function f(a,c){var b=c.offset().left-a.offset().left+c.width()/2,d=a.width(),f=a.data("steps")?d/(a.data("steps")-1):null,k=a.data("steps")?Math.round(b/f):null,b=a.data("steps")?f*k/d:b/d;a.data("relativeTargetPosition",b);b={targetStep:a.data("targetStep"),currentStep:a.data("steps")?a.data("currentStep"):null,relativePosition:a.data("relativePosition"),relativeTargetPosition:b};
k!==a.data("targetStep")&&(a.data("targetStep",k),b.targetStep=k,a.trigger("onTargetSnapPositionChanged",b));return b}function q(a){var c=a.slideControl,b=c.find(".slider"),d=c.width();a=d/(a.steps-1)*a.step/d;d=f(c,b);c.trigger("onStart",d);c.trigger("onChanged",d);b.stop().animate({left:100*a+"%"},150,function(){c.trigger("onComplete",f(c,b))})}function r(a){var c=a.slideControl,b=c.find(".slider"),d=f(c,b);c.trigger("onStart",d);c.trigger("onChanged",d);b.stop().animate({left:100*a.relativePosition+
"%"},150,function(){c.trigger("onComplete",f(c,b))})}function s(a,c){var b=f(a,c);b.targetStep!==a.data("currentStep")&&(a.data("currentStep",b.targetStep),b.currentStep=b.targetStep,a.data("relativePosition",b.relativeTargetPosition));c.stop().animate({left:100*b.relativeTargetPosition+"%"},150,function(){a.trigger("onComplete",b)})}function n(a){var c=a.data.slideControl,b=a.data.slider;!b.hasClass("dragable")||l()&&0<=String(a.originalEvent).indexOf("MouseEvent")||(a=Math.max(0,Math.min(((a.originalEvent&&
a.originalEvent.touches&&a.originalEvent.touches[0].pageX?a.originalEvent.touches[0].pageX:a.pageX)-c.offset().left)/c.width(),1)),b.css("left",100*a+"%"),a!==c.data("relativePosition")&&c.data("relativePosition",a),c.trigger("onChanged",f(c,b)))}function t(a,c){var b=e(a),d=b.find(".slider"),g=b.width(),g=g/(c.steps-1)*(c.currentStep-1)/g;b.data("steps",c.steps);b.data("currentStep",c.currentStep);b.data("targetStep",c.currentStep);b.data("relativePosition",c.currentRelativePosition);d.css({"margin-left":d.width()/
-2,top:b.height()/2-d.height()/2});b.on("onStart",function(b,a){c.onStart(a)});b.on("onChanged",function(b,a){c.onChanged(a)});b.on("onTargetSnapPositionChanged",function(b,a){if(c.steps)c.onTargetSnapPositionChanged(a)});b.on("onComplete",function(b,a){c.onComplete(a)});c.steps&&!isNaN(c.currentStep)?d.css("left",100*g+"%"):isNaN(c.currentRelativePosition)||d.css("left",100*c.currentRelativePosition+"%");d.on("click",function(b){b.preventDefault();b.stopImmediatePropagation()}).on("mousedown touchstart",
function(){e(h).on("mousemove touchmove",{slideControl:b,slider:d},n);if(l())e("body").css("overflow","hidden").on("touchmove",m);b.addClass("dragable");d.addClass("dragable");e("html, body").css("cursor","ew-resize");b.trigger("onStart",f(b,d))}).on("dragstart",function(b){b.preventDefault()});b.on("click",function(a){a.preventDefault();a.stopImmediatePropagation();a=a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0].pageX?a.originalEvent.touches[0].pageX:a.pageX;var c=Math.max(0,
Math.min((a-b.offset().left)/b.width(),1)),e;e=f(b,d);b.trigger("onStart",e);b.trigger("onChanged",e);if(b.data("steps")){e=b.width();var g=e/(b.data("steps")-1);a=Math.round((a-b.offset().left)/g);var h=Math.max(0,Math.min(g*a/e,1));d.stop().animate({left:100*h+"%"},150,function(){h!==b.data("relativePosition")&&b.data("relativePosition",h);b.trigger("onComplete",f(b,d))})}else d.stop().animate({left:100*c+"%"},150,function(){c!==b.data("relativePosition")&&b.data("relativePosition",c);b.trigger("onComplete",
f(b,d))})});e(h).on("mouseup touchend touchcancel",function(a){e(h).off("mousemove touchmove",n);e("body").css("overflow","").off("touchmove",m);d.hasClass("dragable")&&(isNaN(parseInt(b.data("steps"),10))?b.trigger("onComplete",f(b,d)):s(b,d),b.removeClass("dragable"),d.removeClass("dragable"),e("html, body").css("cursor",""))})}var g;g={init:function(a){var c=e.extend({currentRelativePosition:0,steps:void 0,currentStep:0,onStart:function(){},onChanged:function(){},onTargetSnapPositionChanged:function(){},
onComplete:function(){}},a);c.currentStep+=1;return this.each(function(){t(this,c)})},slideToStep:function(a){q({step:a,steps:this.data("steps"),slideControl:this})},slideToRelativePosition:function(a){r({relativePosition:a,slideControl:this})}};e.fn.slideControl=function(a){if(g[a])return g[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return g.init.apply(this,arguments)}})(jQuery,window,document);