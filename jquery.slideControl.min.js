/*!
 * jquery.slideControl.js ~ v0.1.0 ~ Copyright (c) 2013 Boris Diakur, https://github.com/borisdiakur/jquery.slideControl.js
 * Released under WTFPL license, http://wtfpl.org/
 */
(function(g,p,l){function m(){return p.navigator.msMaxTouchPoints||"ontouchstart"in l.documentElement}function n(b){b.preventDefault()}function f(b,c){var a=c.offset().left-b.offset().left+c.width()/2,d=b.width(),f=b.data("steps")?d/(b.data("steps")-1):null,h=b.data("steps")?Math.round(a/f):null,a=b.data("steps")?f*h/d:a/d;b.data("relativeTargetPosition",a);a={targetStep:b.data("targetStep"),currentStep:b.data("steps")?b.data("currentStep"):null,relativePosition:b.data("relativePosition"),relativeTargetPosition:a};
h!==b.data("targetStep")&&(b.data("targetStep",h),a.targetStep=h,b.trigger("onTargetSnapPositionChanged",a));return a}function q(b){var c=b.slideControl,a=c.find(".slider"),d=c.width();b=d/(b.steps-1)*b.step/d;d=f(c,a);c.trigger("onStart",d);c.trigger("onChanged",d);a.stop().animate({left:100*b+"%"},150,function(){c.trigger("onComplete",f(c,a))})}function r(b){var c=b.slideControl,a=c.find(".slider"),d=f(c,a);c.trigger("onStart",d);c.trigger("onChanged",d);a.stop().animate({left:100*b.relativePosition+
"%"},150,function(){c.trigger("onComplete",f(c,a))})}function s(b,c){var a=f(b,c);a.targetStep!==b.data("currentStep")&&(b.data("currentStep",a.targetStep),a.currentStep=a.targetStep,b.data("relativePosition",a.relativeTargetPosition));c.stop().animate({left:100*a.relativeTargetPosition+"%"},150,function(){b.trigger("onComplete",a)})}function t(b,c){var a=g(b),d=a.find(".slider"),e=a.width(),e=e/(c.steps-1)*(c.currentStep-1)/e;a.data("steps",c.steps);a.data("currentStep",c.currentStep);a.data("targetStep",
c.currentStep);a.data("relativePosition",c.currentRelativePosition);d.css({"margin-left":d.width()/-2,top:a.height()/2-d.height()/2});a.on("onStart",function(a,b){c.onStart(b)});a.on("onChanged",function(a,b){c.onChanged(b)});a.on("onTargetSnapPositionChanged",function(a,b){if(c.steps)c.onTargetSnapPositionChanged(b)});a.on("onComplete",function(a,b){c.onComplete(b)});c.steps&&!isNaN(c.currentStep)?d.css("left",100*e+"%"):isNaN(c.currentRelativePosition)||d.css("left",100*c.currentRelativePosition+
"%");d.on("click",function(a){a.preventDefault();a.stopImmediatePropagation()}).on("mousedown touchstart",function(){if(m())g("body").css("overflow","hidden").on("touchmove",n);a.addClass("dragable");d.addClass("dragable");g("html, body").css("cursor","ew-resize");a.trigger("onStart",f(a,d))}).on("dragstart",function(a){a.preventDefault()});a.on("click",function(b){b.preventDefault();b.stopImmediatePropagation();b=b.originalEvent&&b.originalEvent.touches&&b.originalEvent.touches[0].pageX?b.originalEvent.touches[0].pageX:
b.pageX;var c=Math.max(0,Math.min((b-a.offset().left)/a.width(),1)),e;e=f(a,d);a.trigger("onStart",e);a.trigger("onChanged",e);if(a.data("steps")){e=a.width();var g=e/(a.data("steps")-1);b=Math.round((b-a.offset().left)/g);var k=g*b/e;d.stop().animate({left:100*k+"%"},150,function(){k!==a.data("relativePosition")&&a.data("relativePosition",k);a.trigger("onComplete",f(a,d))})}else d.stop().animate({left:100*c+"%"},150,function(){c!==a.data("relativePosition")&&a.data("relativePosition",c);a.trigger("onComplete",
f(a,d))})});g(l).on("mousemove touchmove",function(b){!d.hasClass("dragable")||m()&&0<=String(b.originalEvent).indexOf("MouseEvent")||(b=Math.max(0,Math.min(((b.originalEvent&&b.originalEvent.touches&&b.originalEvent.touches[0].pageX?b.originalEvent.touches[0].pageX:b.pageX)-a.offset().left)/a.width(),1)),d.css("left",100*b+"%"),b!==a.data("relativePosition")&&a.data("relativePosition",b),a.trigger("onChanged",f(a,d)))}).on("mouseup touchend touchcancel",function(b){g("body").css("overflow","").off("touchmove",
n);d.hasClass("dragable")&&(isNaN(parseInt(a.data("steps"),10))?a.trigger("onComplete",f(a,d)):s(a,d),a.removeClass("dragable"),d.removeClass("dragable"),g("html, body").css("cursor",""))})}var e;e={init:function(b){var c=g.extend({currentRelativePosition:0,steps:void 0,currentStep:0,onStart:function(){},onChanged:function(){},onTargetSnapPositionChanged:function(){},onComplete:function(){}},b);c.currentStep+=1;return this.each(function(){t(this,c)})},slideToStep:function(b){q({step:b,steps:this.data("steps"),
slideControl:this})},slideToRelativePosition:function(b){r({relativePosition:b,slideControl:this})}};g.fn.slideControl=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return e.init.apply(this,arguments)}})(jQuery,window,document);