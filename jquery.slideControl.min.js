/*!
 * jquery.slideControl.js ~ v0.1.0 ~ Copyright (c) 2013 Boris Diakur, https://github.com/borisdiakur/jquery.slideControl.js
 * Released under WTFPL license, http://wtfpl.org/
 */
(function(g,p,k){function l(){return p.navigator.msMaxTouchPoints||"ontouchstart"in k.documentElement}function m(a){a.preventDefault()}function e(a,c){var b=c.offset().left-a.offset().left+c.width()/2,d=a.width(),e=a.data("steps")?d/(a.data("steps")-1):null,h=a.data("steps")?Math.round(b/e):null,b=a.data("steps")?Math.round(e*h)/d:b/d;a.data("relativeTargetPosition",b);b={targetStep:a.data("targetStep"),currentStep:a.data("steps")?a.data("currentStep"):null,relativePosition:a.data("relativePosition"),
relativeTargetPosition:b};h!==a.data("targetStep")&&(a.data("targetStep",h),b.targetStep=h,a.trigger("onTargetSnapPositionChanged",b));return b}function q(a){var c=a.slideControl,b=c.find(".slider"),d=c.width();a=d/(a.steps-1)*a.step/d;d=e(c,b);c.trigger("onStart",d);c.trigger("onChanged",d);b.stop().animate({left:100*a+"%"},150,function(){c.trigger("onComplete",e(c,b))})}function r(a){var c=a.slideControl,b=c.find(".slider");c.width();var d=e(c,b);c.trigger("onStart",d);c.trigger("onChanged",d);
b.stop().animate({left:100*a.relativePosition+"%"},150,function(){c.trigger("onComplete",e(c,b))})}function n(a,c){var b=e(a,c);b.targetStep!==a.data("currentStep")&&(a.data("currentStep",b.targetStep),b.currentStep=b.targetStep,a.data("relativePosition",b.relativeTargetPosition));c.stop().animate({left:100*b.relativeTargetPosition+"%"},150,function(){a.trigger("onComplete",b)})}function s(a,c){var b=g(a),d=b.find(".slider"),f=b.width(),f=f/(c.steps-1)*(c.currentStep-1)/f;b.data("steps",c.steps);
b.data("currentStep",c.currentStep);b.data("targetStep",c.currentStep);b.data("relativePosition",c.currentRelativePosition);d.css({"margin-left":d.width()/-2,top:b.height()/2-d.height()/2});b.on("onStart",function(b,a){c.onStart(a)});b.on("onChanged",function(b,a){c.onChanged(a)});b.on("onTargetSnapPositionChanged",function(b,a){if(c.steps)c.onTargetSnapPositionChanged(a)});b.on("onComplete",function(b,a){c.onComplete(a)});c.steps&&!isNaN(c.currentStep)?d.css("left",100*f+"%"):isNaN(c.currentRelativePosition)||
d.css("left",100*c.currentRelativePosition+"%");d.on("click",function(b){b.preventDefault();b.stopImmediatePropagation()}).on("mousedown touchstart",function(){if(l())g("body").css("overflow","hidden").on("touchmove",m);b.addClass("dragable");d.addClass("dragable");g("html, body").css("cursor","ew-resize");b.trigger("onStart",e(b,d))}).on("dragstart",function(b){b.preventDefault()});b.on("click",function(a){a.preventDefault();a.stopImmediatePropagation();var c=Math.max(0,Math.min(((a.originalEvent&&
a.originalEvent.touches&&a.originalEvent.touches[0].pageX?a.originalEvent.touches[0].pageX:a.pageX)-b.offset().left)/b.width(),1));a=e(b,d);b.trigger("onStart",a);b.trigger("onChanged",a);d.stop().animate({left:100*c+"%"},150,function(){c!==b.data("relativePosition")&&b.data("relativePosition",c);n(b,d)})});g(k).on("mousemove touchmove",function(a){!d.hasClass("dragable")||l()&&0<=String(a.originalEvent).indexOf("MouseEvent")||(a=Math.max(0,Math.min(((a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0].pageX?
a.originalEvent.touches[0].pageX:a.pageX)-b.offset().left)/b.width(),1)),d.css("left",100*a+"%"),a!==b.data("relativePosition")&&b.data("relativePosition",a),b.trigger("onChanged",e(b,d)))}).on("mouseup touchend touchcancel",function(a){g("body").css("overflow","").off("touchmove",m);d.hasClass("dragable")&&(isNaN(parseInt(b.data("steps"),10))?b.trigger("onComplete",e(b,d)):n(b,d),b.removeClass("dragable"),d.removeClass("dragable"),g("html, body").css("cursor",""))})}var f;f={init:function(a){var c=
g.extend({currentRelativePosition:0,steps:void 0,currentStep:0,onStart:function(){},onChanged:function(){},onTargetSnapPositionChanged:function(){},onComplete:function(){}},a);c.currentStep+=1;return this.each(function(){s(this,c)})},slideToStep:function(a){q({step:a,steps:this.data("steps"),slideControl:this})},slideToRelativePosition:function(a){r({relativePosition:a,slideControl:this})}};g.fn.slideControl=function(a){if(f[a])return f[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===
typeof a||!a)return f.init.apply(this,arguments)}})(jQuery,window,document);